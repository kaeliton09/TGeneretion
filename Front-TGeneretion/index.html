<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>teste</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
        <input type="text" id="name" placeholder="Adicionar Jogador">
        <button onclick="addPlayer()">Adicionar</button>
        <ul id="listplayers"></ul>
        <button onclick="getTeams()">Gerar Times</button>
        <p>time 1</p>
        <ul id="team-1"></ul>
        <p>time 2</p>
        <ul id="team-2"></ul>
    </main>
    
    <script>
        async function addPlayer() {
            const name = document.getElementById("name").value;
            const res = await fetch("http://localhost:8080/players",{
                method: "POST",
                headers: { "content-Type": "application/json"},
                body: JSON.stringify({ name })
            });
            const player = await res.json();
            console.log("salvo: ", player);
        }

        async function loadPlayers() {
            const res = await fetch("http://localhost:8080/players/all");
            const players = await res.json();
            const listplayers = document.getElementById("listplayers");
            listplayers.innerHTML = players.map(p => `<li>${p.name}</li>`).join("");
        }

        async function getTeam1() {
            const res = await fetch("http://localhost:8080/players/team");
            const players = await res.json();
            const listplayers = document.getElementById("team-1");
            listplayers.innerHTML = players.map(p => `<li>${p.name}</li>`).join("");
        }

        async function getTeam2() {
            const res = await fetch("http://localhost:8080/players/team");
            const players = await res.json();
            const listplayers = document.getElementById("team-2");
            listplayers.innerHTML = players.map(p => `<li>${p.name}</li>`).join("");
        }

        function getTeams(){
            getTeam1();
            getTeam2();
        };

        setInterval(loadPlayers, 500);

        loadPlayers();
        
    </script>
</body>
</html>